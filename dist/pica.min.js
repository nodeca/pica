/* pica 2.0.3 nodeca/pica */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.pica=e()}}(function(){return function e(t,r,n){function i(o,u){if(!r[o]){if(!t[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var f=r[o]={exports:{}};t[o][0].call(f.exports,function(e){var r=t[o][1][e];return i(r?r:e)},f,f.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){"use strict";t.exports=function(){return document.createElement("canvas")}},{}],2:[function(e,t,r){"use strict";var n=1;t.exports=function(){return n++}},{}],3:[function(e,t,r){"use strict";function n(e){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0}var i=2e3,a=500;n.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():(e=this.create(),e.id=this.lastId++,e.release=function(){t.release(e)}),this.acquired[e.id]=e,e},n.prototype.release=function(e){delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout(this.gc.bind(this),a))},n.prototype.gc=function(){var e=Date.now();this.available=this.available.filter(function(t){return e-t.lastUsed>i?(t.destroy(),!1):!0}),0!==this.available.length?this.timeoutId=setTimeout(this.gc.bind(this),a):this.timeoutId=0},t.exports=n},{}],4:[function(e,t,r){"use strict";function n(e){return 0>e?0:e>255?255:e}function i(e){return Math.round(e*((1<<f)-1))}function a(e,t,r,n,a){var o,u,s,h,f,c,d,g,p,v,m,w,_,b,E,T,x,R=l[e].filter,y=1/n,A=Math.min(1,n),M=l[e].win/A,j=Math.floor(2*(M+1)),U=new Int16Array((j+2)*r),I=0;for(o=0;r>o;o++){for(u=(o+.5)*y+a,s=Math.max(0,Math.floor(u-M)),h=Math.min(t-1,Math.ceil(u+M)),f=h-s+1,c=new Float32Array(f),d=new Int16Array(f),g=0,p=s,v=0;h>=p;p++,v++)m=R((p+.5-u)*A),g+=m,c[v]=m;for(w=0,v=0;v<c.length;v++)_=c[v]/g,w+=_,d[v]=i(_);for(d[r>>1]+=i(1-w),b=0;b<d.length&&0===d[b];)b++;if(b<d.length){for(E=d.length-1;E>0&&0===d[E];)E--;T=s+b,x=E-b+1,U[I++]=T,U[I++]=x,U.set(d.subarray(b,E+1),I),I+=x}else U[I++]=0,U[I++]=0}return U}function o(e,t,r,i,a,o){var u,s,h,f,l,c,d,g,p,v,m,w=0,_=0;for(p=0;i>p;p++){for(l=0,v=0;a>v;v++){for(c=o[l++],d=o[l++],g=w+4*c|0,u=s=h=f=0;d>0;d--)m=o[l++],f=f+m*e[g+3]|0,h=h+m*e[g+2]|0,s=s+m*e[g+1]|0,u=u+m*e[g]|0,g=g+4|0;t[_+3]=n(f+8192>>14),t[_+2]=n(h+8192>>14),t[_+1]=n(s+8192>>14),t[_]=n(u+8192>>14),_=_+4*i|0}_=4*(p+1)|0,w=(p+1)*r*4|0}}function u(e,t,r,i,a,o){var u,s,h,f,l,c,d,g,p,v,m,w=0,_=0;for(p=0;i>p;p++){for(l=0,v=0;a>v;v++){for(c=o[l++],d=o[l++],g=w+4*c|0,u=s=h=f=0;d>0;d--)m=o[l++],f=f+m*e[g+3]|0,h=h+m*e[g+2]|0,s=s+m*e[g+1]|0,u=u+m*e[g]|0,g=g+4|0;t[_+3]=n(f+8192>>14),t[_+2]=n(h+8192>>14),t[_+1]=n(s+8192>>14),t[_]=n(u+8192>>14),_=_+4*i|0}_=4*(p+1)|0,w=(p+1)*r*4|0}}function s(e,t,r){for(var n=3,i=t*r*4|0;i>n;)e[n]=255,n=n+4|0}function h(e){var t=e.src,r=e.width,n=e.height,i=e.toWidth,h=e.toHeight,f=e.scaleX||e.toWidth/e.width,l=e.scaleY||e.toHeight/e.height,c=e.offsetX||0,d=e.offsetY||0,g=e.dest||new Uint8Array(i*h*4),p="undefined"==typeof e.quality?3:e.quality,v=e.alpha||!1;if(1>r||1>n||1>i||1>h)return[];var m=a(p,r,i,f,c),w=a(p,n,h,l,d),_=new Uint8Array(i*n*4);return o(t,_,r,n,i,m),u(_,g,n,i,h,w),v||s(g,i,h),g}var f=14,l=[{win:.5,filter:function(e){return e>=-.5&&.5>e?1:0}},{win:1,filter:function(e){if(-1>=e||e>=1)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(-2>=e||e>=2)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(-3>=e||e>=3)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}];t.exports=h},{}],5:[function(e,t,r){"use strict";function n(e,t,r){for(var n,i,a,o,u,s=t*r,h=new Uint16Array(s),f=0;s>f;f++)n=e[4*f],i=e[4*f+1],a=e[4*f+2],u=n>=i&&n>=a?n:i>=a&&i>=n?i:a,o=i>=n&&a>=n?n:a>=i&&n>=i?i:a,h[f]=257*(u+o)>>1;return h}function i(e,t,r,i,o,u){var s,h,f,l,c,d,g,p,v,m,w,_,b;if(!(0===i||.5>o)){o>2&&(o=2);var E=n(e,t,r),T=new Uint16Array(E);a(T,t,r,o);for(var x=i/100*4096+.5|0,R=257*u|0,y=t*r,A=0;y>A;A++)_=2*(E[A]-T[A]),Math.abs(_)>=R&&(b=4*A,s=e[b],h=e[b+1],f=e[b+2],p=s>=h&&s>=f?s:h>=s&&h>=f?h:f,g=h>=s&&f>=s?s:s>=h&&f>=h?h:f,d=257*(p+g)>>1,g===p?l=c=0:(c=32767>=d?4095*(p-g)/(p+g)|0:4095*(p-g)/(510-p-g)|0,l=s===p?65535*(h-f)/(6*(p-g))|0:h===p?21845+(65535*(f-s)/(6*(p-g))|0):43690+(65535*(s-h)/(6*(p-g))|0)),d+=x*_+2048>>12,d>65535?d=65535:0>d&&(d=0),0===c?s=h=f=d>>8:(m=32767>=d?d*(4096+c)+2048>>12:d+((65535-d)*c+2048>>12),v=2*d-m>>8,m>>=8,w=l+21845&65535,s=w>=43690?v:w>=32767?v+(6*(m-v)*(43690-w)+32768>>16):w>=10922?m:v+(6*(m-v)*w+32768>>16),w=65535&l,h=w>=43690?v:w>=32767?v+(6*(m-v)*(43690-w)+32768>>16):w>=10922?m:v+(6*(m-v)*w+32768>>16),w=l-21845&65535,f=w>=43690?v:w>=32767?v+(6*(m-v)*(43690-w)+32768>>16):w>=10922?m:v+(6*(m-v)*w+32768>>16)),e[b]=s,e[b+1]=h,e[b+2]=f)}}var a=e("glur/mono16");t.exports=i,t.exports.lightness=n},{"glur/mono16":11}],6:[function(e,t,r){"use strict";t.exports.createRegions=function(e){var t,r,n,i,a,o,u,s=e.toWidth/e.width,h=e.toHeight/e.height,f=Math.floor(e.srcTileSize*s)-2*e.destTileBorder,l=Math.floor(e.srcTileSize*h)-2*e.destTileBorder,c=[];for(i=0;i<e.toHeight;i+=l)for(n=0;n<e.toWidth;n+=f)t=n-e.destTileBorder,0>t&&(t=0),a=n+f+e.destTileBorder-t,t+a>=e.toWidth&&(a=e.toWidth-t),r=i-e.destTileBorder,0>r&&(r=0),o=i+l+e.destTileBorder-r,r+o>=e.toHeight&&(o=e.toHeight-r),u={toX:t,toY:r,toWidth:a,toHeight:o,toInnerX:n,toInnerY:i,toInnerWidth:f,toInnerHeight:l,offsetX:t/s-Math.floor(t/s),offsetY:r/h-Math.floor(r/h),scaleX:s,scaleY:h,x:Math.floor(t/s),y:Math.floor(r/h),width:Math.ceil(a/s),height:Math.ceil(o/h)},c.push(u);return c},t.exports.eachLimit=function(e,t,r,n){function i(t){if(!u){if(t)return u=!0,void n(t);o++,o===e.length?n():a<e.length&&r(e[a++],i)}}0===e.length&&n();for(var a=0,o=0,u=!1;t>a&&a<e.length;)r(e[a++],i)}},{}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./resize_array"),n=e("./unsharp");t.onmessage=function(e){var i=e.data;i.dest=new Uint8Array(i.toWidth*i.toHeight*4),r(i),i.unsharpAmount&&n(i.dest,i.toWidth,i.toHeight,i.unsharpAmount,i.unsharpRadius,i.unsharpThreshold),t.postMessage({output:i.dest},[i.dest.buffer])}}},{"./resize_array":4,"./unsharp":5}],8:[function(e,t,r){"use strict";function n(e,t,r,n){var c=t.getContext("2d",{alpha:Boolean(r.alpha)}),d=h();d.width=Math.min(f,e.width),d.height=Math.min(f,e.height);var g=d.getContext("2d",{alpha:Boolean(r.alpha)});g.globalCompositeOperation="copy";var p=o({width:e.naturalWidth||e.width,height:e.naturalHeight||e.height,srcTileSize:f,toWidth:t.width,toHeight:t.height,destTileBorder:Math.ceil(Math.max(l,2.5*r.unsharpRadius|0))});return u(p,1,function(t,n){g.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);var o=g.getImageData(0,0,t.width,t.height),u=c.createImageData(t.toWidth,t.toHeight),s={src:o.data,dest:u.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold};i(s),r.unsharpAmount&&a(s.dest,s.toWidth,s.toHeight,s.unsharpAmount,s.unsharpRadius,s.unsharpThreshold),c.putImageData(u,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),n()},n),s()}var i=e("./js/resize_array"),a=e("./js/unsharp"),o=e("./js/utils").createRegions,u=e("./js/utils").eachLimit,s=e("./js/generate_id"),h=e("./js/create_canvas"),f=1024,l=3;t.exports=n,t.exports.terminate=function(){}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/resize_array":4,"./js/unsharp":5,"./js/utils":6}],9:[function(e,t,r){"use strict";function n(e,t,r,n){var i=t.getContext("2d",{alpha:Boolean(r.alpha)}),a=f();a.width=Math.min(c,e.naturalWidth||e.width),a.height=Math.min(c,e.naturalHeight||e.height);var o=a.getContext("2d",{alpha:Boolean(r.alpha)});o.globalCompositeOperation="copy";var l=u({width:e.naturalWidth||e.width,height:e.naturalHeight||e.height,srcTileSize:c,toWidth:t.width,toHeight:t.height,destTileBorder:Math.ceil(Math.max(d,2.5*r.unsharpRadius|0))}),v=navigator&&navigator.hardwareConcurrency||4,m=r._id||h();return p[m]=!0,s(l,v,function(t,n){o.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);var a=o.getImageData(0,0,t.width,t.height),u={src:a.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold},s=g.acquire();s.value.onmessage=function(e){var r,a,o,u,h;if(s.release(),!p[m])return void n(!0);if(e.data.err)return void n(e.data.err);if(o=i.createImageData(t.toWidth,t.toHeight),u=e.data.output,h=o.data,h.set)h.set(u);else for(r=0,a=u.length;a>r;r++)h[r]=u[r];i.putImageData(o,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),n()},s.value.postMessage(u,[u.src.buffer])},function(e){p[m]&&(delete p[m],n(e))}),m}function i(e){p[e]&&delete p[e]}var a=e("webworkify"),o=e("./js/worker.js"),u=e("./js/utils").createRegions,s=e("./js/utils").eachLimit,h=e("./js/generate_id"),f=e("./js/create_canvas"),l=e("./js/pool"),c=1024,d=3,g=new l(function(){return{value:a(o),destroy:function(){this.value.terminate()}}}),p={};t.exports=n,t.exports.terminate=i},{"./js/create_canvas":1,"./js/generate_id":2,"./js/pool":3,"./js/utils":6,"./js/worker.js":7,webworkify:13}],10:[function(e,t,r){"use strict";function n(e){try{(window.console.error||window.console.log).call(window.console,e)}catch(t){}}function i(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("gl error "+t)}function a(e){return e.getContext("webgl")||e.getContext("experimental-webgl")}function o(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(n("Shader compile error: "+e.getShaderInfoLog(i)+". Source: `"+r+"`"),e.deleteShader(i),null)}function u(e,t,r){var a=o(e,e.VERTEX_SHADER,_[t]),u=o(e,e.FRAGMENT_SHADER,_[r]),s=e.createProgram();return e.attachShader(s,a),e.attachShader(s,u),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||(n("Program linking error: "+e.getProgramInfoLog(s)),e.deleteProgram(s)),i(e),s}function s(e,t,r,n,a){var o=e.getAttribLocation(t,r);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,a.elementSize,e.FLOAT,!1,0,0),i(e)}function h(e,t,r){var n=e.createTexture();return e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),i(e),n}function f(e,t,r,n){var i=e.getUniformLocation(t,r);e.uniform1i(i,n)}function l(e,t,r,n,i){var a=e.getUniformLocation(t,r);e.uniform2f(a,n,i)}function c(e,t,r,n){var i=e,a=e+r,o=t,u=t+n;return[i,o,a,o,i,u,i,u,a,o,a,u]}function d(e,t,r,n){var a=e.createTexture();return e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,n,0,e.RGBA,e.UNSIGNED_BYTE,null),i(e),a}function g(e,t,r,n){var a=d(e,t,r,n),o=e.getParameter(e.FRAMEBUFFER_BINDING),u=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),i(e),{fbo:u,texture:a,oldFbo:o}}function p(e,t,r,n,a,o,h,d,p){var v=u(e,"#vsh-basic",o);e.useProgram(v),f(e,v,"u_image",t),l(e,v,"u_imageSize",r,n),l(e,v,"u_resolution",h,d),s(e,v,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),s(e,v,"a_position",p?c(0,d,h,-d):c(0,0,h,d),{elementSize:2}),e.viewport(0,0,h,d);var m=g(e,a,h,d);return e.viewport(0,0,h,d),e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,m.oldFbo),i(e),m}function v(e,t,r){var n=e.naturalWidth||e.width,i=e.naturalHeight||e.height,a=t.canvas.width,o=t.canvas.height;t.viewport(0,0,a,o);var u=0;h(t,u,e);var s=2,f=3;p(t,u,n,i,s,"#fsh-lanczos-1d-covolve-horizontal",a,i,!1);var l=p(t,s,a,i,f,"#fsh-lanczos-1d-covolve-vertical",a,o,!0);t.flush();var c=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,c),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,l.texture,0);var d=t.checkFramebufferStatus(t.FRAMEBUFFER);if(d!==t.FRAMEBUFFER_COMPLETE)throw new Error("Bad framebuffer status: "+d);r.alpha||(t.clearColor(1,1,1,1),t.colorMask(!1,!1,!1,!0),t.clear(t.COLOR_BUFFER_BIT));var g=new Uint8Array(a*o*4);t.readPixels(0,0,a,o,t.RGBA,t.UNSIGNED_BYTE,g);var v="undefined"==typeof r.unsharpAmount?0:0|r.unsharpAmount,w="undefined"==typeof r.unsharpRadius?0:r.unsharpRadius,_="undefined"==typeof r.unsharpThreshold?0:0|r.unsharpThreshold;return v&&m(g,a,o,v,w,_),g}var m=e("./js/unsharp"),w=e("./js/generate_id"),_={};_["#vsh-basic"]="precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n",_["#fsh-lanczos-1d-covolve-horizontal"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\n\n#define winSize 3.0\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.x / u_resolution.x;\n  float count = winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(pixel.x * k, 0.);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * sinc(xpi / winSize);\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",_["#fsh-lanczos-1d-covolve-vertical"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\n\n#define winSize 3.0\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.y / u_resolution.y;\n  float count = winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(0., pixel.y * k);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * sinc(xpi / winSize);\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",t.exports=function(e,t,r,i){var o,u;try{u=document.createElement("canvas"),u.id="pica-webgl-temporarry-canvas",u.height=t.height,u.width=t.width,document.body.appendChild(u),o=a(u);var s=v(e,o,r);o.finish(),document.body.removeChild(u);var h=t.getContext("2d"),f=h.createImageData(t.width,t.height);f.data.set(s),h.putImageData(f,0,0),i(null,s)}catch(l){n(l),o.finish(),document.body.removeChild(u),i(l)}return w()},t.exports.terminate=function(){}},{"./js/generate_id":2,"./js/unsharp":5}],11:[function(e,t,r){function n(e){.5>e&&(e=.5);var t=Math.exp(.527076)/e,r=Math.exp(-t),n=Math.exp(-2*t),i=(1-r)*(1-r)/(1+2*t*r-n);return o=i,u=i*(t-1)*r,s=i*(t+1)*r,h=-i*n,f=2*r,l=-n,c=(o+u)/(1-f-l),d=(s+h)/(1-f-l),new Float32Array([o,u,s,h,f,l,c,d])}function i(e,t,r,n,i,a){var o,u,s,h,f,l,c,d,g,p,v,m,w,_;for(g=0;a>g;g++){for(l=g*i,c=g,d=0,o=e[l],f=o*n[6],h=f,v=n[0],m=n[1],w=n[4],_=n[5],p=0;i>p;p++)u=e[l],s=u*v+o*m+h*w+f*_,f=h,h=s,o=u,r[d]=h,d++,l++;for(l--,d--,c+=a*(i-1),o=e[l],f=o*n[7],h=f,u=o,v=n[2],m=n[3],p=i-1;p>=0;p--)s=u*v+o*m+h*w+f*_,f=h,h=s,o=u,u=e[l],t[c]=r[d]+h,l--,d--,c-=a}}function a(e,t,r,a){if(a){var o=new Uint16Array(e.length),u=new Float32Array(Math.max(t,r)),s=n(a);i(e,o,u,s,t,r,a),i(o,e,u,s,r,t,a)}}var o,u,s,h,f,l,c,d;t.exports=a},{}],12:[function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;10>r;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==n.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(a){return!1}}var a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=i()?Object.assign:function(e,t){for(var r,i,u=n(e),s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var h in r)a.call(r,h)&&(u[h]=r[h]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(r);for(var f=0;f<i.length;f++)o.call(r,i[f])&&(u[i[f]]=r[i[f]])}}return u}},{}],13:[function(e,t,r){var n=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e,t){for(var r,u=Object.keys(a),s=0,h=u.length;h>s;s++){var f=u[s],l=a[f].exports;if(l===e||l&&l["default"]===e){r=f;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},s=0,h=u.length;h>s;s++){var f=u[s];c[f]=f}i[r]=[Function(["require","module","exports"],"("+e+")(self)"),c]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[r]=r,i[d]=[Function(["require"],"var f = require("+o(r)+");(f.default ? f.default : f)(self);"),g];var p="("+n+")({"+Object.keys(i).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(d)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,m=new Blob([p],{type:"text/javascript"});if(t&&t.bare)return m;var w=v.createObjectURL(m),_=new Worker(w);return"function"==typeof v.revokeObjectURL&&v.revokeObjectURL(w),_}},{}],"/":[function(e,t,r){"use strict";function n(e){return Object.prototype.toString.call(e)}function i(e){return"[object Function]"===n(e)}function a(e,t,n,o){if(i(n)&&(o=n,n={}),isNaN(n)||(n={quality:n,alpha:!1}),c||(r.WEBGL=!1),c&&r.WEBGL){r.debug("Resize canvas with WebGL");var u=p(e,t,n,function(i){i?(r.debug("WebGL resize failed, do fallback and cancel next attempts"),r.debug(i),c=!1,a(e,t,w({},n,{_id:u}),o)):o()});return u}return s||(r.WW=!1),s&&r.WW?(r.debug("Resize buffer in WebWorker"),g(e,t,n,o)):(r.debug("Resize buffer sync (freeze event loop)"),d(e,t,n,o))}function o(e,t){var r={src:e.src,dest:e.dest,width:0|e.width,height:0|e.height,toWidth:0|e.toWidth,toHeight:0|e.toHeight,quality:e.quality,alpha:e.alpha,unsharpAmount:e.unsharpAmount,unsharpRadius:e.unsharpRadius,unsharpThreshold:e.unsharpThreshold};r.dest=v(r),r.unsharpAmount&&m(r.dest,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),t(null,r.dest)}function u(e){d.terminate(e),g.terminate(e),p.terminate(e)}var s="undefined"!=typeof window&&"Worker"in window;if(s)try{var h=e("webworkify")(function(){});h.terminate()}catch(f){s=!1}var l,c=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(l=document.createElement("canvas"),(l.getContext("webgl")||l.getContext("experimental-webgl"))&&(c=!0))}catch(f){}finally{l=null}var d=e("./lib/resize_js"),g=e("./lib/resize_js_ww"),p=e("./lib/resize_webgl"),v=e("./lib/js/resize_array"),m=e("./lib/js/unsharp"),w=e("object-assign");r.resizeCanvas=a,r.resizeBuffer=o,r.terminate=u,r.WW=s,r.WEBGL=!1,r.debug=function(){}},{"./lib/js/resize_array":4,"./lib/js/unsharp":5,"./lib/resize_js":8,"./lib/resize_js_ww":9,"./lib/resize_webgl":10,"object-assign":12,webworkify:13}]},{},[])("/")});
